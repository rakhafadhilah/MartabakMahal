<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <link rel="stylesheet" href="css/widget-style.css">
	<script src="script/widget.js"></script>
	<title>Page Ketiga</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        body{
            background-color:black;
        }
        .mid-element{
            text-align:center;
            width:650px;
        }
        .nav-edit{
            height:47px;
        }
        nav.nav-wrapper{
            line-height:45px;
        }
        ul.tabs{
            background-color:grey;
        }
        .tabs .tab a:focus, .tabs .tab a:focus.active{
            background-color:black;
        }
        .tabs .indicator{
            background-color:transparent;
        }
        .box{
            background-color:grey;
            height: 100%;
        }
        .btn{
            background-color:grey;
        }
        .lilspace{
            margin: 10px 0 10px 0;
        }
        .greydark{
            background-color: #333333;
        }
        .middle{
            text-align: center;
            padding: 6px;
        }

    </style>

</head>
<body onload="updateClock(); updateDate(); setInterval(['updateClock()','updateDate()'], 1000)")>
    <div class="row">
        <!-- Tabs -->
        <div class="col s2 greydark" >
            <div id="checkout" class="col s12">
                <p class="flow-text white-text middle">Checkout</p>
            </div>
            <div class="row">
                <div class="box col grey lighten-1 s12">
                    <p class="white-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum at lacus congue, suscipit elit nec, tincidunt orci.</p>
                    <p class="white-text">Mauris sdsdsdsd dolor augue, vulputate in pharetra ac, facilisis nec libero. Fusce condimentum gravida urna, vitae scelerisque erat ornare nec.</p>
                </div>
            </div>
        </div>
        <!-- navbar -->
        <div class="col s8">
            <nav class="nav-wrapper transparent nav-edit">
                <div>
                    <ul class="white-text">
                        <li class="left">Terjual :</li>
                        <li><a href=""><%= terjual %></a></li>
                        <li><a id="clock" class="mid-element hide-on-med-and-down">&nbsp;</a></li>
						<li class="right hide-on-med-and-down"><a id="date" href="">&nbsp;</a></li>
                    </ul>
                </div>
            </nav>
            <div class="box col s12">

                    <input class="white-text" type="text" id="myText" placeholder="Search..">
                    <button onclick="myFunction(<%= type %>)">Search</button>
                <div id="card-container" class="row">
                    <% for (var i = 0; i < foods.length; i++) {%>
                    <a href="" class="col s12 m5">
                        
                        <div class="card">
                            <div class="card-image">
                                <!-- <img src="images/download.jpeg"> -->
                            </div>
                            <div class="card-content">
                                <p id="myName"><%= foods[i].name %></p>
                            </div>
                            <div class="card-action">
                                <p id="myPrice<%= i %>"></p>
                            </div>
                        </div>  
                    </a>
                    <% } %>
                </div>   

        </div>
    </div>
	
    <div class="col s2">
        <h3 class="white-text" style="padding-left: 10px">Varian</h3>
        <button class="waves-effect waves-light btn col s12 lilspace active" onclick='change_price(0, <%= type %>)'>Tipis</a>
        <button class="waves-effect waves-light btn col s12 lilspace" onclick='change_price(1, <%= type %>)'>Medium</a>
        <button class="waves-effect waves-light btn col s12 lilspace" onclick='change_price(2, <%= type %>)'>Large</a>
        <button class="waves-effect waves-light btn col s12 lilspace" onclick='change_price(3, <%= type %>)'>Spesial</a>
    </div>
    
<!-- Compiled and minified JavaScript -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
<script>
    $(document).ready(function() {
        $('.tabs').tabs();
	  
		var btns = document.getElementsByClassName("btn");
		for (var i = 0; i < btns.length; i++) {
			btns[i].addEventListener("click", function() {
			var current = document.getElementsByClassName("active");
			if (current.length > 0) { 
				current[0].className = current[0].className.replace(" active", "");
			}
			this.className += " active";
			});
		}
		
    })

    var foodJSON = '<%- JSON.stringify(foodJSON); %>';
    console.log(foodJSON);

    var OBJ_food = JSON.parse(foodJSON);
    console.log(OBJ_food);
	
	function myFunction(type) {
		var x = document.getElementById("myText").value;
		console.log(window.location.href);
		
		var queries = "&search="+String(x);
		window.location.href = "pageketiga?type=" + type + queries; 
    }
    console.log(<%= tmp %>);
    let meme = OBJ_food.foods.filter((hehe) => {
        return hehe.type == <%= type %>;
    })
    console.log(meme);
    function change_price(val, tipe) {
        <% for (var i = 0; i < foods.length; i++) { %>
            document.getElementById('myPrice<%= i %>').innerText = meme[<%= i %>].price[val];
        <% } %>
    }




</script>
</body>
</html>